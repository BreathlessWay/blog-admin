(this["webpackJsonpblog-admin"]=this["webpackJsonpblog-admin"]||[]).push([[12],{708:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r(159),n=r.n(a),i=function(e){var t=e.replace(/^\?(.*)$/,"$1");return t?n.a.parse(t):null}},852:function(e,t,r){"use strict";r.r(t);var a,n=r(670),i=r.n(n),c=r(11),l=r(12),o=r(36),u=r(34),s=r(35),d=(r(222),r(143)),p=r(0),h=r.n(p),f=r(140),m=r(73),b=r(25),v=r(708),g=r(105),y=r(63),k=Object(p.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(3),r.e(11)]).then(r.bind(null,883))})),j=Object(p.lazy)((function(){return Promise.all([r.e(6),r.e(42),r.e(10)]).then(r.bind(null,905))})),C=Object(p.lazy)((function(){return Promise.all([r.e(44),r.e(9)]).then(r.bind(null,891))})),w=Object(p.lazy)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(3),r.e(8)]).then(r.bind(null,893))})),T=d.a.confirm,O=d.a.warning,D=Object(f.b)((function(e){return{articleDetailStore:e.articleDetailStore,tagStore:e.tagStore}}))(a=Object(f.c)(a=function(e){function t(){var e,r;Object(c.a)(this,t);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(r=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).time=null,r.startCache=function(){r.time=setInterval((function(){var e=r.props.articleDetailStore.detail;if(e){var t=e.title,a=e.intro,n=e.tags,i=e.status,c=e.renderType,l=e.markdown,o=e.draftDetail,u=n.map((function(e){return e.objectId})).filter((function(e){return e})),s="";c===m.c.richText&&o&&o.toText()&&(s=o.toRAW()),c===m.c.markdown&&(s=l);var d={id:r.articleId||"create",data:{title:t,intro:a,tags:u,status:i,renderType:c,detail:s}};g.a.set({key:b.b,value:d})}}),b.c)},r.loadCache=function(){if(r.articleCache){var e=r.articleCache.data,t=e.title,a=e.intro,n=e.tags,i=e.renderType,c=e.status,l=e.detail,o={title:t,intro:a,tags:[],renderType:i,status:Number(c)};n.length&&(o.tags=r.props.tagStore.tags.filter((function(e){return e.objectId&&n.includes(e.objectId)}))),i===m.c.richText&&(o.richTextRaw=l),i===m.c.markdown&&(o.markdown=l),r.props.articleDetailStore.setDetail(o)}r.startCache()},r.getData=function(){var e=r.props.articleDetailStore.createArticle;r.isEdit,r.isCreate&&e()},r}return Object(s.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this).props.location.pathname!==y.e.article.edit||e.articleId){t.next=5;break}return O({title:"\u63d0\u793a",content:"\u7f16\u8f91\u6587\u7ae0\u7f3a\u5931\u6587\u7ae0id\u53c2\u6570\uff01",okText:"\u786e\u5b9a",onOk:function(){e.props.history.replace(y.e.article.home)}}),t.abrupt("return");case 5:return t.next=7,i.a.awrap(e.getData());case 7:if(!e.judgeCache){t.next=10;break}return T({title:"\u63d0\u793a",content:"\u60a8\u4f3c\u4e4e\u6709\u4e0a\u4e00\u6b21\u672a\u4fdd\u5b58\u7684\u8349\u7a3f\uff0c\u662f\u5426\u8f7d\u5165\uff1f",keyboard:!1,maskClosable:!1,onOk:function(){e.loadCache()},onCancel:function(){g.a.remove(b.b)}}),t.abrupt("return");case 10:g.a.remove(b.b),e.startCache();case 12:case"end":return t.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.time),this.time=null,this.props.articleDetailStore.resetError()}},{key:"render",value:function(){var e=this.props.articleDetailStore.detail;return h.a.createElement(h.a.Fragment,null,h.a.createElement(k,null),(null===e||void 0===e?void 0:e.renderType)===m.c.richText&&h.a.createElement(j,null),(null===e||void 0===e?void 0:e.renderType)===m.c.markdown&&h.a.createElement(C,null),h.a.createElement(w,null))}},{key:"judgeCache",get:function(){if(this.articleCache){var e=this.articleCache,t=e.id,r=e.data,a=r.title,n=r.intro,i=r.detail,c=r.tags,l=r.renderType,o=r.status;if(this.isCreate&&"create"===t)return Boolean(a||n||i||c.length);if(this.isEdit&&t===this.articleId){var u=this.props.articleDetailStore.detail;if(u){if(a!==u.title||n!==u.intro||l!==u.renderType||Number(o)!==u.status)return!0;if(u.tags.map((function(e){return e.objectId})).join()!==c.join())return!0;if(l===m.c.markdown&&i!==u.markdown)return!0;if(l===m.c.richText&&i!==u.richTextRaw)return!0}}}return!1}},{key:"articleCache",get:function(){return g.a.get(b.b)}},{key:"articleId",get:function(){var e,t;return null!==(e=null===(t=Object(v.a)(this.props.location.search))||void 0===t?void 0:t.id)&&void 0!==e?e:null}},{key:"isCreate",get:function(){return this.props.location.pathname===y.e.article.create}},{key:"isEdit",get:function(){var e=this.props.location,t=e.search,r=e.pathname;return t&&r===y.e.article.edit}}]),t}(p.Component))||a)||a;t.default=D}}]);
//# sourceMappingURL=ArticleEditPage.0f7a972b.chunk.js.map