{"version":3,"sources":["service/login.ts","pages/RouterPage/index.tsx"],"names":["getMenu","homepageStore","pathname","isLoginPage","setMenuList","baseRoute","_pathname","firstMenu","path","setKeys","login","a","async","userStore","history","token","_token","storageToken","storage","get","LOGIN_TOKEN","location","replace","push","routeMapPath","Header","Content","Footer","Sider","MenuComponent","lazy","BreadcrumbComponent","GitHubComponent","HomePage","MePage","ArticleIndexPage","ArticleTagPage","ArticleEditPage","CatPage","PhotographyIndexPage","PhotographyEditPage","RouterPage","inject","allStore","globalStore","observer","this","props","loading","className","spinning","home","exact","component","me","article","index","render","tag","create","edit","to","cat","photography","type","align","justify","React","Component"],"mappings":"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","file":"static/js/RouterPage.1a0bc4af.chunk.js","sourcesContent":["import UserStore from '@/store/UserStore';\nimport HomePageStore from '@/store/HomePageStore';\nimport * as H from 'history';\n\nimport { baseRoute, routeMapPath } from '@/route';\n\nimport { MenuListType } from '@/types/hompage';\nimport { LOGIN_TOKEN } from '@/utils/constant';\n\nimport { storage } from '@/utils/storage';\n\nexport const getMenu = ({\n\thomepageStore,\n\tpathname,\n\tisLoginPage,\n}: {\n\thomepageStore: HomePageStore;\n\tpathname: string;\n\tisLoginPage?: boolean;\n}) => {\n\t// get menu\n\thomepageStore.setMenuList(baseRoute as MenuListType);\n\tconst _pathname = isLoginPage ? homepageStore.firstMenu.path : pathname;\n\thomepageStore.setKeys(_pathname);\n};\n\nexport const login = async ({\n\tuserStore,\n\thomepageStore,\n\thistory,\n\tisLoginPage,\n\ttoken,\n}: {\n\tuserStore: UserStore;\n\thomepageStore: HomePageStore;\n\thistory: H.History;\n\tisLoginPage?: boolean;\n\ttoken?: string;\n}) => {\n\tlet _token;\n\tif (token) {\n\t\t_token = token;\n\t} else {\n\t\tconst storageToken = storage.get(LOGIN_TOKEN);\n\t\t// 验证token是否有效\n\t\t_token = storageToken;\n\t}\n\tif (_token) {\n\t\tuserStore.login(_token);\n\t\tgetMenu({\n\t\t\thomepageStore,\n\t\t\tpathname: history.location.pathname,\n\t\t\tisLoginPage,\n\t\t});\n\t\tif (isLoginPage) {\n\t\t\thistory.replace(homepageStore.firstMenu.path);\n\t\t}\n\t} else {\n\t\thistory.push(routeMapPath.login);\n\t}\n};\n","import React, { lazy } from 'react';\n\nimport { Route, RouteComponentProps, Switch, Redirect } from 'react-router-dom';\nimport { inject, observer } from 'mobx-react';\n\nimport { Layout, Row, Spin, BackTop, Icon } from 'antd';\n\nimport { StoreType } from '@/store/store';\n\nimport { login } from '@/service/login';\n\nimport { routeMapPath } from '@/route';\n\nimport './style.scss';\n\nconst { Header, Content, Footer, Sider } = Layout;\n\nconst MenuComponent = lazy(() =>\n\timport(\n\t\t/* webpackChunkName: \"MenuComponent\" */ '@/components/business/MenuComponent'\n\t),\n);\n\nconst BreadcrumbComponent = lazy(() =>\n\timport(\n\t\t/* webpackChunkName: \"BreadcrumbComponent\" */ '@/components/business/BreadcrumbComponent'\n\t),\n);\n\nconst GitHubComponent = lazy(() =>\n\timport(\n\t\t/* webpackChunkName: \"GitHubComponent\" */ '@/components/common/GitHubComponent'\n\t),\n);\n\nconst HomePage = lazy(() =>\n\timport(/* webpackChunkName: \"HomePage\" */ '@/pages/HomePage'),\n);\n\nconst MePage = lazy(() =>\n\timport(/* webpackChunkName: \"MePage\" */ '@/pages/MePage'),\n);\n\nconst ArticleIndexPage = lazy(() =>\n\timport(\n\t\t/* webpackChunkName: \"ArticleIndexPage\" */ '@/pages/ArticlePage/ArticleIndexPage'\n\t),\n);\n\nconst ArticleTagPage = lazy(() =>\n\timport(\n\t\t/* webpackChunkName: \"ArticleTagPage\" */ '@/pages/ArticlePage/ArticleTagPage'\n\t),\n);\n\nconst ArticleEditPage = lazy(() =>\n\timport(\n\t\t/* webpackChunkName: \"ArticleEditPage\" */ '@/pages/ArticlePage/ArticleEditPage'\n\t),\n);\n\nconst CatPage = lazy(() =>\n\timport(/* webpackChunkName: \"CatPage\" */ '@/pages/CatPage'),\n);\n\nconst PhotographyIndexPage = lazy(() =>\n\timport(\n\t\t/* webpackChunkName: \"PhotographyIndexPage\" */ '@/pages/PhotographyPage/PhotographyIndexPage'\n\t),\n);\n\nconst PhotographyEditPage = lazy(() =>\n\timport(\n\t\t/* webpackChunkName: \"PhotographyEditPage\" */ '@/pages/PhotographyPage/PhotographyEditPage'\n\t),\n);\n\nexport type RouterPagePropType = Pick<\n\tStoreType,\n\t'userStore' | 'homepageStore' | 'globalStore'\n> &\n\tRouteComponentProps;\n\n@inject((allStore: StoreType) => ({\n\tuserStore: allStore.userStore,\n\thomepageStore: allStore.homepageStore,\n\tglobalStore: allStore.globalStore,\n}))\n@observer\nclass RouterPage extends React.Component<RouterPagePropType> {\n\tcomponentDidMount(): void {\n\t\tconst { userStore, history, homepageStore } = this.props;\n\t\tlogin({ userStore, history, homepageStore });\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\thomepageStore: { firstMenu },\n\t\t\tglobalStore: { loading },\n\t\t} = this.props;\n\t\treturn (\n\t\t\t<Layout>\n\t\t\t\t<Sider className=\"home-page_sider\">\n\t\t\t\t\t<aside className=\"home-page_logo\">博客管理后台</aside>\n\t\t\t\t\t<MenuComponent />\n\t\t\t\t</Sider>\n\t\t\t\t<Layout className=\"home-page_layout\">\n\t\t\t\t\t<Header className=\"home-page_header\">\n\t\t\t\t\t\t<BreadcrumbComponent />\n\t\t\t\t\t</Header>\n\t\t\t\t\t<Content className=\"home-page_content\">\n\t\t\t\t\t\t<Spin spinning={loading}>\n\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\tpath={routeMapPath.home}\n\t\t\t\t\t\t\t\t\texact={true}\n\t\t\t\t\t\t\t\t\tcomponent={HomePage}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Route path={routeMapPath.me} exact={true} component={MePage} />\n\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\tpath={routeMapPath.article.index}\n\t\t\t\t\t\t\t\t\trender={() => (\n\t\t\t\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\t\t\t\texact={true}\n\t\t\t\t\t\t\t\t\t\t\t\tpath={routeMapPath.article.home}\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={ArticleIndexPage}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\t\t\t\texact={true}\n\t\t\t\t\t\t\t\t\t\t\t\tpath={routeMapPath.article.tag}\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={ArticleTagPage}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\t\t\t\texact={true}\n\t\t\t\t\t\t\t\t\t\t\t\tpath={routeMapPath.article.create}\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={ArticleEditPage}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\t\t\t\texact={true}\n\t\t\t\t\t\t\t\t\t\t\t\tpath={routeMapPath.article.edit}\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={ArticleEditPage}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\"*\"\n\t\t\t\t\t\t\t\t\t\t\t\trender={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn <Redirect to={routeMapPath.article.home} />;\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\tpath={routeMapPath.cat}\n\t\t\t\t\t\t\t\t\texact={true}\n\t\t\t\t\t\t\t\t\tcomponent={CatPage}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\tpath={routeMapPath.photography.index}\n\t\t\t\t\t\t\t\t\trender={() => (\n\t\t\t\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\t\t\t\texact={true}\n\t\t\t\t\t\t\t\t\t\t\t\tpath={routeMapPath.photography.home}\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={PhotographyIndexPage}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\t\t\t\texact={true}\n\t\t\t\t\t\t\t\t\t\t\t\tpath={routeMapPath.photography.edit}\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={PhotographyEditPage}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\"*\"\n\t\t\t\t\t\t\t\t\t\t\t\trender={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Redirect to={routeMapPath.photography.home} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\tpath=\"*\"\n\t\t\t\t\t\t\t\t\trender={() => <Redirect to={firstMenu.path} />}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t\t<BackTop>\n\t\t\t\t\t\t\t\t<aside className=\"back-top\">\n\t\t\t\t\t\t\t\t\t<Icon type=\"up\" />\n\t\t\t\t\t\t\t\t</aside>\n\t\t\t\t\t\t\t</BackTop>\n\t\t\t\t\t\t</Spin>\n\t\t\t\t\t</Content>\n\t\t\t\t\t<Footer className=\"home-page_footer\">\n\t\t\t\t\t\t<Row type=\"flex\" align=\"middle\" justify=\"center\">\n\t\t\t\t\t\t\t<GitHubComponent />\n\t\t\t\t\t\t\t&nbsp; BreathlessWay 博客管理后台系统\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Footer>\n\t\t\t\t</Layout>\n\t\t\t</Layout>\n\t\t);\n\t}\n}\n\nexport default RouterPage as any;\n"],"sourceRoot":""}